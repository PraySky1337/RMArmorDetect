# ================= 基础训练设置 =================
epochs: 300
imgsz: 416
batch: 256
device: "0,1"
workers: 32
cache: "ram"

# NMS和推理设置
iou: 0.5   # NMS IoU阈值，从0.45提高到0.5
conf: 0.5  # 置信度阈值，从0.25提高到0.5

# train script only 
train_ratio: 0.91
seed: 0

# ================= 优化器 & 学习率 =================
optimizer: "AdamW"
lr0: 0.0004       # 提高初始学习率
lrf: 0.05          # 提高最终学习率比例，最终lr=0.0000625
momentum: 0.937
weight_decay: 0.0005  # 降低weight decay

warmup_epochs: 8
warmup_momentum: 0.8
warmup_bias_lr: 0.1
cos_lr: true
 
# ================= 数据增强超参数 =================
hsv_h: 0.07
hsv_s: 0.7
hsv_v: 0.7

degrees: 5.0
translate: 0.2
scale: 0.5 
shear: 0.0
perspective: 0.0 

flipud: 0.0  
fliplr: 0.0
 
mosaic: 1.0
mixup: 0.1
copy_paste: 0.0 
erasing: 0.1

close_mosaic: 100   # 最后50轮关闭mosaic

# ================= 训练流程控制 =================
patience: 50
resume: false
pretrained: true
amp: true
deterministic: false
val: true

# ================= 日志 & 权重保存 =================
tensorboard: true
project: "/home/rry/RMArmorDetect/runs"
name: "armor"
exist_ok: true
save: true
save_period: -1
plots: true

# ================= 说明 =================
# Loss 权重已在 armor_detect/configs/armor_yolo11.yaml 中定义:
#   pose: 12.0, kobj: 1.0, cls: 0.5, color: 0.5
#   focal_gamma: 1.5
#   wing_omega: 10.0, wing_epsilon: 2.0 
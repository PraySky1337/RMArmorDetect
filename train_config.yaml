# ================= 基础训练设置 =================
epochs: 200
imgsz: 416
batch: 256
device: "0,1"
workers: 32
cache: "ram"

# NMS和推理设置
iou: 0.45  # NMS IoU阈值，从0.7降低到0.45以减少重复检测
conf: 0.25 # 置信度阈值

# train script only
train_ratio: 0.91
seed: 0

# ================= 优化器 & 学习率 =================
optimizer: "AdamW"
lr0: 0.00025
lrf: 0.01
momentum: 0.937
weight_decay: 0.0008

warmup_epochs: 5
warmup_momentum: 0.8
warmup_bias_lr: 0.1
cos_lr: true

# ================= 数据增强超参数 =================
hsv_h: 0.08
hsv_s: 0.9
hsv_v: 0.9

degrees: 15.0
translate: 0.2
scale: 0.7
shear: 0.0
perspective: 0.0

flipud: 0.0 
fliplr: 0.0

mosaic: 0.8
mixup: 0.1
copy_paste: 0.0
erasing: 0.5

close_mosaic: 50

# ================= 训练流程控制 =================
patience: 50
resume: false
pretrained: true
amp: true
deterministic: false
val: true

# ================= 日志 & 权重保存 =================
tensorboard: true
project: "/home/rry/RMArmorDetect/runs"
name: "armor"
exist_ok: true
save: true
save_period: -1
plots: true

# ================= 说明 =================
# Loss 权重已在 armor_detect/configs/armor_yolo11.yaml 中定义:
#   pose: 12.0, kobj: 1.0, cls: 0.5, color: 0.5
#   focal_gamma: 1.5
#   wing_omega: 10.0, wing_epsilon: 2.0
